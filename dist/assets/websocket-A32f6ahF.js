import{d as g,c as x,w as o,a as c,b as u,e as t,f as s,_ as b,g as a,h as p,r as y,o as d}from"./index-c5PrNzGP.js";import{_ as f,a as v}from"./Card-dhBREXno.js";import{_ as k}from"./DocsLayout.vue_vue_type_script_setup_true_lang-D4FaFzot.js";const w={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},h={class:"mb-12"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},W={class:"p-4"},C={class:"p-4"},B={class:"p-4"},E={class:"mb-12"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},z={class:"p-6"},j={class:"flex items-center mb-4"},D={class:"flex items-center justify-between"},N={class:"p-6"},R={class:"flex items-center mb-4"},O={class:"flex items-center justify-between"},A={class:"p-6"},F={class:"flex items-center mb-4"},J={class:"flex items-center justify-between"},M={class:"p-6"},T={class:"flex items-center mb-4"},V={class:"flex items-center justify-between"},I={class:"p-6"},L={class:"flex items-center mb-4"},U={class:"flex items-center justify-between"},H={class:"p-6"},P={class:"flex items-center mb-4"},$={class:"flex items-center justify-between"},q={class:"mb-12"},Y={class:"mb-6"},X={class:"mb-12"},G={class:"space-y-6"},st=g({__name:"websocket",setup(K){return(Q,e)=>{const n=b,i=f,l=v,r=p,m=y("prism");return d(),x(k,null,{default:o(()=>[c((d(),u("div",w,[e[53]||(e[53]=t("div",{class:"mb-8"},[t("h1",{class:"text-4xl font-bold text-gray-900 dark:text-white mb-4"},"WebSocket"),t("p",{class:"text-xl text-gray-600 dark:text-gray-300"}," Real-time communication with WebSocket support. Built-in hub management, room-based messaging, and collaborative features. ")],-1)),t("div",h,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Overview",-1)),t("div",S,[s(i,null,{default:o(()=>[t("div",W,[s(n,{name:"i-lucide-users",class:"h-8 w-8 text-blue-500 mb-3"}),e[0]||(e[0]=t("h3",{class:"font-semibold text-gray-900 dark:text-white mb-2"},"Multi-Room Support",-1)),e[1]||(e[1]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Organize users into rooms with automatic user list management and room-specific broadcasting.",-1))])]),_:1}),s(i,null,{default:o(()=>[t("div",C,[s(n,{name:"i-lucide-zap",class:"h-8 w-8 text-yellow-500 mb-3"}),e[2]||(e[2]=t("h3",{class:"font-semibold text-gray-900 dark:text-white mb-2"},"Real-time Messaging",-1)),e[3]||(e[3]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Instant message delivery with system notifications and typing indicators.",-1))])]),_:1}),s(i,null,{default:o(()=>[t("div",B,[s(n,{name:"i-lucide-mouse-pointer",class:"h-8 w-8 text-green-500 mb-3"}),e[4]||(e[4]=t("h3",{class:"font-semibold text-gray-900 dark:text-white mb-2"},"Collaborative Features",-1)),e[5]||(e[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300"},"Cursor tracking, collaborative drawing, code editing, and shared whiteboards.",-1))])]),_:1})]),e[9]||(e[9]=t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," Base Framework includes a production-ready WebSocket implementation with automatic hub initialization, connection management, and message broadcasting. The system supports multiple rooms, user management, and various collaborative features out of the box. ",-1)),s(l,{icon:"i-lucide-info",color:"blue",variant:"soft",class:"mb-6"},{title:o(()=>e[6]||(e[6]=[a("WebSocket Endpoint",-1)])),description:o(()=>e[7]||(e[7]=[a(" The WebSocket server runs automatically when you start Base Framework and is available at ",-1),t("code",null,"/api/ws",-1)])),_:1})]),e[54]||(e[54]=t("div",{class:"mb-12"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Connecting to WebSocket"),t("div",{class:"mb-6"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Basic Connection"),t("div",{class:"relative"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-javascript"},`// Connect to WebSocket server
const socket = new WebSocket('ws://localhost:8100/api/ws?id=user123&nickname=John&room=general');

socket.onopen = function(event) {
    console.log('Connected to WebSocket server');
};

socket.onmessage = function(event) {
    const message = JSON.parse(event.data);
    console.log('Received message:', message);
};

socket.onclose = function(event) {
    console.log('Disconnected from WebSocket server');
};

socket.onerror = function(error) {
    console.error('WebSocket error:', error);
};`)])])]),t("div",{class:"mb-6"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Connection Parameters"),t("div",{class:"overflow-hidden"},[t("table",{class:"w-full"},[t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Parameter"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Required"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Description")])]),t("tbody",{class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},[t("tr",null,[t("td",{class:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white"},"id"),t("td",{class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400"},"Optional"),t("td",{class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300"},"Unique client identifier")]),t("tr",null,[t("td",{class:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white"},"nickname"),t("td",{class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400"},"Optional"),t("td",{class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300"},"Display name for the user")]),t("tr",null,[t("td",{class:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white"},"room"),t("td",{class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400"},"Optional"),t("td",{class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300"},"Room to join (default: general)")])])])])])],-1)),e[55]||(e[55]=t("div",{class:"mb-12"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Message Types"),t("div",{class:"space-y-6"},[t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Chat Messages"),t("div",{class:"relative"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-javascript"},`// Send a chat message
socket.send(JSON.stringify({
    type: 'message',
    content: 'Hello, everyone!',
    room: 'general',
    nickname: 'John'
}));

// Receive chat message
{
    "type": "message",
    "content": "Hello, everyone!",
    "room": "general",
    "nickname": "John"
}`)])])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"System Messages"),t("div",{class:"relative"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-javascript"},`// System notifications (received only)
{
    "type": "system",
    "content": "John joined the room",
    "room": "general",
    "nickname": "System"
}

// User list updates
{
    "type": "users_update",
    "content": ["John", "Jane", "Bob"],
    "room": "general"
}`)])])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Collaborative Features"),t("div",{class:"relative"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-javascript"},`// Drawing data
socket.send(JSON.stringify({
    type: 'draw',
    content: {
        fromX: 100, fromY: 150,
        toX: 200, toY: 250,
        color: '#FF0000'
    }
}));

// Cursor movement
socket.send(JSON.stringify({
    type: 'cursor_move',
    content: { x: 150, y: 200 }
}));

// Code updates
socket.send(JSON.stringify({
    type: 'code_update',
    content: {
        code: 'console.log("Hello World");',
        language: 'javascript'
    }
}));`)])])])])],-1)),t("div",E,[e[36]||(e[36]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Live Examples",-1)),e[37]||(e[37]=t("p",{class:"text-gray-600 dark:text-gray-300 mb-6"}," Base Framework includes several built-in WebSocket examples that you can access when running your server. These examples demonstrate different real-time features and can be used as templates for your own applications. ",-1)),t("div",_,[s(i,null,{default:o(()=>[t("div",z,[t("div",j,[s(n,{name:"i-lucide-message-circle",class:"h-6 w-6 text-blue-500 mr-3"}),e[10]||(e[10]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Chat Application",-1))]),e[13]||(e[13]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Multi-room chat with user lists, system notifications, and real-time messaging. ",-1)),t("div",D,[e[12]||(e[12]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/chat.html",-1)),s(r,{size:"xs",variant:"soft",color:"blue"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[11]||(e[11]=a(" View Example ",-1))]),_:1,__:[11]})])])]),_:1}),s(i,null,{default:o(()=>[t("div",N,[t("div",R,[s(n,{name:"i-lucide-paintbrush",class:"h-6 w-6 text-green-500 mr-3"}),e[14]||(e[14]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Collaborative Drawing",-1))]),e[17]||(e[17]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Real-time drawing canvas with cursor tracking and collaborative sketching. ",-1)),t("div",O,[e[16]||(e[16]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/draw.html",-1)),s(r,{size:"xs",variant:"soft",color:"green"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[15]||(e[15]=a(" View Example ",-1))]),_:1,__:[15]})])])]),_:1}),s(i,null,{default:o(()=>[t("div",A,[t("div",F,[s(n,{name:"i-lucide-kanban-square",class:"h-6 w-6 text-purple-500 mr-3"}),e[18]||(e[18]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Kanban Board",-1))]),e[21]||(e[21]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Collaborative task management with drag-and-drop and real-time updates. ",-1)),t("div",J,[e[20]||(e[20]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/kanban.html",-1)),s(r,{size:"xs",variant:"soft",color:"purple"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[19]||(e[19]=a(" View Example ",-1))]),_:1,__:[19]})])])]),_:1}),s(i,null,{default:o(()=>[t("div",M,[t("div",T,[s(n,{name:"i-lucide-code",class:"h-6 w-6 text-orange-500 mr-3"}),e[22]||(e[22]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Code Editor",-1))]),e[25]||(e[25]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Collaborative code editing with syntax highlighting and real-time changes. ",-1)),t("div",V,[e[24]||(e[24]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/editor.html",-1)),s(r,{size:"xs",variant:"soft",color:"orange"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[23]||(e[23]=a(" View Example ",-1))]),_:1,__:[23]})])])]),_:1}),s(i,null,{default:o(()=>[t("div",I,[t("div",L,[s(n,{name:"i-lucide-activity",class:"h-6 w-6 text-red-500 mr-3"}),e[26]||(e[26]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"System Monitor",-1))]),e[29]||(e[29]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Real-time system metrics dashboard with live charts and monitoring. ",-1)),t("div",U,[e[28]||(e[28]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/monitor.html",-1)),s(r,{size:"xs",variant:"soft",color:"red"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[27]||(e[27]=a(" View Example ",-1))]),_:1,__:[27]})])])]),_:1}),s(i,null,{default:o(()=>[t("div",H,[t("div",P,[s(n,{name:"i-lucide-table",class:"h-6 w-6 text-teal-500 mr-3"}),e[30]||(e[30]=t("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Collaborative Spreadsheet",-1))]),e[33]||(e[33]=t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mb-4"}," Real-time spreadsheet editing with cell updates and collaborative features. ",-1)),t("div",$,[e[32]||(e[32]=t("code",{class:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"/static/spreadsheet.html",-1)),s(r,{size:"xs",variant:"soft",color:"teal"},{default:o(()=>[s(n,{name:"i-lucide-external-link",class:"h-3 w-3 mr-1"}),e[31]||(e[31]=a(" View Example ",-1))]),_:1,__:[31]})])])]),_:1})]),s(l,{icon:"i-lucide-globe",color:"green",variant:"soft"},{title:o(()=>e[34]||(e[34]=[a("Access Examples",-1)])),description:o(()=>e[35]||(e[35]=[a(" When your Base Framework server is running, visit ",-1),t("code",null,"http://localhost:8100/static/",-1),a(" to see all available examples. Each example includes full source code you can adapt for your needs. ",-1)])),_:1})]),t("div",q,[e[43]||(e[43]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Integration with Base Framework",-1)),t("div",Y,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Configuration",-1)),e[41]||(e[41]=t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"},[a(" WebSocket support can be enabled or disabled using the "),t("code",null,"WS_ENABLED"),a(" environment variable. By default, WebSocket is enabled. ")],-1)),e[42]||(e[42]=t("div",{class:"relative mb-4"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-bash"},`# Enable WebSocket support (default)
WS_ENABLED=true

# Disable WebSocket support
WS_ENABLED=false`)])],-1)),s(l,{icon:"i-lucide-settings",color:"blue",variant:"soft",class:"mb-6"},{title:o(()=>e[38]||(e[38]=[a("Conditional Initialization",-1)])),description:o(()=>e[39]||(e[39]=[a(" When ",-1),t("code",null,"WS_ENABLED=false",-1),a(", the WebSocket hub is not initialized and the ",-1),t("code",null,"/api/ws",-1),a(" endpoint is not registered, reducing memory usage and startup time. ",-1)])),_:1})]),e[44]||(e[44]=t("div",{class:"mb-6"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Automatic Initialization"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"},[a(" When WebSocket is enabled, it's automatically initialized during application startup. The WebSocket hub starts automatically and registers the "),t("code",null,"/api/ws"),a(" endpoint. ")])],-1)),e[45]||(e[45]=t("div",{class:"mb-6"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Broadcasting from Controllers"),t("div",{class:"relative"},[t("pre",{class:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"},[t("code",{class:"language-go"},`// Access WebSocket hub in your controllers
func (c *YourController) BroadcastUpdate(ctx *router.Context) error {
    // Get the WebSocket hub (this would need to be injected)
    // hub.BroadcastMessage("update", map[string]any{
    //     "type": "data_update",
    //     "payload": yourData,
    // })
    
    return ctx.JSON(200, map[string]any{"status": "broadcasted"})
}`)])])],-1)),e[46]||(e[46]=t("div",{class:"mb-6"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Event Integration"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," WebSocket integrates seamlessly with Base Framework's event system. You can listen for model changes and automatically broadcast updates to connected clients. ")],-1))]),t("div",X,[e[52]||(e[52]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Security & Best Practices",-1)),t("div",G,[s(l,{icon:"i-lucide-shield-check",color:"amber",variant:"soft"},{title:o(()=>e[47]||(e[47]=[a("CORS Configuration",-1)])),description:o(()=>e[48]||(e[48]=[a(" The WebSocket upgrader currently allows all origins for development. In production, configure the CheckOrigin function to validate allowed origins. ",-1)])),_:1}),e[49]||(e[49]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Authentication"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," WebSocket connections can be authenticated using query parameters, headers, or by validating tokens during the connection upgrade process. ")],-1)),e[50]||(e[50]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Rate Limiting"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," Implement rate limiting for WebSocket messages to prevent spam and abuse. Consider limiting messages per user per second. ")],-1)),e[51]||(e[51]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Message Validation"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," Always validate incoming WebSocket messages on the server side. Never trust client-provided data without proper validation and sanitization. ")],-1))])]),e[56]||(e[56]=t("div",{class:"mb-12"},[t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Architecture"),t("div",{class:"space-y-6"},[t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Hub Pattern"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," Base Framework uses a centralized hub pattern for WebSocket management. The hub maintains all active connections, handles room management, and coordinates message broadcasting between clients. ")]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Connection Lifecycle"),t("ul",{class:"list-disc list-inside text-gray-600 dark:text-gray-300 space-y-2"},[t("li",null,[t("strong",null,"Connect:"),a(" Client upgrades HTTP connection to WebSocket")]),t("li",null,[t("strong",null,"Register:"),a(" Client is added to the hub and assigned to a room")]),t("li",null,[t("strong",null,"Message Handling:"),a(" Incoming messages are processed and broadcast")]),t("li",null,[t("strong",null,"Disconnect:"),a(" Client is removed from hub and room notifications sent")])])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-3"},"Scalability"),t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"}," For high-scale applications, consider using Redis or other message brokers to enable WebSocket clustering across multiple server instances. ")])])],-1))])),[[m]])]),_:1})}}});export{st as default};
