import{a as u,_ as g}from"./Card-dhBREXno.js";import{_ as c}from"./DocsLayout.vue_vue_type_script_setup_true_lang-D4FaFzot.js";import{c as p,w as r,a as m,b as f,e,f as n,g as a,i as y,r as x,o as i}from"./index-c5PrNzGP.js";const b={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},v={class:"mb-12"},h={class:"mb-12"},w={class:"grid md:grid-cols-2 gap-6"},k={class:"flex items-center gap-3"},_={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded flex items-center justify-center"},C={class:"flex items-center gap-3"},S={class:"w-8 h-8 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded flex items-center justify-center"},E={class:"flex items-center gap-3"},D={class:"w-8 h-8 bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400 rounded flex items-center justify-center"},M={class:"flex items-center gap-3"},T={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 rounded flex items-center justify-center"},P={class:"mb-12"},R={class:"space-y-6"},G={class:"flex items-center gap-3"},B={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded flex items-center justify-center"},I={class:"space-y-4"},N={class:"flex items-center gap-3"},U={class:"w-8 h-8 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded flex items-center justify-center"},A={class:"space-y-4"},j={class:"flex items-center gap-3"},F={class:"w-8 h-8 bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400 rounded flex items-center justify-center"},q={class:"space-y-4"},H={class:"flex items-center gap-3"},L={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 rounded flex items-center justify-center"},V={class:"space-y-4"},O={class:"mb-12"},J={class:"space-y-6"},z={class:"flex items-center gap-3"},W={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded flex items-center justify-center"},$={class:"space-y-4"},Q={class:"flex items-center gap-3"},Z={class:"w-8 h-8 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded flex items-center justify-center"},Y={class:"space-y-4"},K={class:"flex items-center gap-3"},X={class:"w-8 h-8 bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400 rounded flex items-center justify-center"},ee={class:"space-y-4"},te={class:"mb-12"},re={class:"space-y-6"},ne={class:"flex items-center gap-3"},se={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded flex items-center justify-center"},oe={class:"space-y-4"},ae={class:"flex items-center gap-3"},le={class:"w-8 h-8 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded flex items-center justify-center"},ie={class:"space-y-4"},de={class:"mb-12"},ue={class:"space-y-6"},ge={class:"flex items-center gap-3"},ce={class:"w-8 h-8 bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 rounded flex items-center justify-center"},pe={class:"space-y-4"},me={class:"flex items-center gap-3"},fe={class:"w-8 h-8 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 rounded flex items-center justify-center"},ye={class:"space-y-4"},xe={class:"flex items-center gap-3"},be={class:"w-8 h-8 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded flex items-center justify-center"},ve={class:"space-y-4"},he={class:"mb-12"},we={class:"grid md:grid-cols-2 gap-6"},ke={class:"mb-12"},Me={__name:"base-helpers",setup(_e){return(Ce,t)=>{const l=u,o=y("Icon"),s=g,d=x("prism");return i(),p(c,null,{default:r(()=>[m((i(),f("div",b,[t[60]||(t[60]=e("div",{class:"mb-8"},[e("h1",{class:"text-4xl font-bold text-gray-900 dark:text-white mb-4"},"Base Helpers"),e("p",{class:"text-xl text-gray-600 dark:text-gray-300"}," Base Framework provides a comprehensive set of helper functions and utilities to streamline development and reduce boilerplate code. ")],-1)),e("section",v,[t[0]||(t[0]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Overview",-1)),t[1]||(t[1]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Base Framework includes several helper packages designed to handle common development tasks like JWT management, context operations, slug generation, dynamic model retrieval, standardized responses, error handling, and custom data types. These helpers promote code consistency and reduce repetitive implementation across your modules. ",-1)),n(l,{icon:"i-heroicons-information-circle",color:"blue",variant:"soft",title:"Helper Categories",description:"Base helpers are organized into logical categories: Core Framework helpers, Context utilities, Authentication helpers, Response helpers, Dynamic model operations, and Error handling types."})]),e("section",h,[t[10]||(t[10]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Helper Categories",-1)),e("div",w,[n(s,null,{header:r(()=>[e("div",k,[e("div",_,[n(o,{name:"i-lucide-wrench",class:"w-5 h-5"})]),t[2]||(t[2]=e("h3",{class:"font-semibold text-blue-600 dark:text-blue-400"},"Core Helpers",-1))])]),default:r(()=>[t[3]||(t[3]=e("ul",{class:"text-sm space-y-2"},[e("li",null,[a("• "),e("code",{class:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"helper/"),a(" - General utilities")]),e("li",null,[a("• "),e("code",{class:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"base/"),a(" - Base classes for modules")]),e("li",null,[a("• "),e("code",{class:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"types/"),a(" - Custom types and response formats")])],-1))]),_:1,__:[3]}),n(s,null,{header:r(()=>[e("div",C,[e("div",S,[n(o,{name:"i-lucide-key",class:"w-5 h-5"})]),t[4]||(t[4]=e("h3",{class:"font-semibold text-green-600 dark:text-green-400"},"Authentication",-1))])]),default:r(()=>[t[5]||(t[5]=e("ul",{class:"text-sm space-y-2"},[e("li",null,"• JWT token generation"),e("li",null,"• Token validation"),e("li",null,"• Context-based user retrieval")],-1))]),_:1,__:[5]}),n(s,null,{header:r(()=>[e("div",E,[e("div",D,[n(o,{name:"i-lucide-server",class:"w-5 h-5"})]),t[6]||(t[6]=e("h3",{class:"font-semibold text-purple-600 dark:text-purple-400"},"HTTP Responses",-1))])]),default:r(()=>[t[7]||(t[7]=e("ul",{class:"text-sm space-y-2"},[e("li",null,"• Standardized success responses"),e("li",null,"• Error handling utilities"),e("li",null,"• Pagination helpers")],-1))]),_:1,__:[7]}),n(s,null,{header:r(()=>[e("div",M,[e("div",T,[n(o,{name:"i-lucide-database",class:"w-5 h-5"})]),t[8]||(t[8]=e("h3",{class:"font-semibold text-orange-600 dark:text-orange-400"},"Dynamic Operations",-1))])]),default:r(()=>[t[9]||(t[9]=e("ul",{class:"text-sm space-y-2"},[e("li",null,"• Dynamic model retrieval"),e("li",null,"• Slug generation and validation"),e("li",null,"• Context type conversion")],-1))]),_:1,__:[9]})])]),e("section",P,[t[23]||(t[23]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Core Helper Functions",-1)),e("div",R,[n(s,null,{header:r(()=>[e("div",G,[e("div",B,[n(o,{name:"i-lucide-key",class:"w-5 h-5"})]),t[11]||(t[11]=e("h3",{class:"font-semibold"},"JWT Authentication Helpers",-1))])]),default:r(()=>[e("div",I,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Helper functions for JWT token generation and validation: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[12]||(t[12]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`// Generate a JWT token for a user
token, err := helper.GenerateJWT(userID)
if err != nil {
    return err
}

// Generate JWT with extended claims
token, err := types.GenerateJWT(userID, map[string]any{
    "role": "admin",
    "permissions": []string{"read", "write"},
})

// Validate JWT token and extract user ID
userID, err := types.ValidateJWT(tokenString)
if err != nil {
    return fmt.Errorf("invalid token: %w", err)
}

// Legacy validation (from helper package)
_, userID, err := helper.ValidateJWT(tokenString)
if err != nil {
    return fmt.Errorf("token validation failed: %w", err)
}`)],-1)])),_:1,__:[12]})])]),_:1}),n(s,null,{header:r(()=>[e("div",N,[e("div",U,[n(o,{name:"i-lucide-layers",class:"w-5 h-5"})]),t[14]||(t[14]=e("h3",{class:"font-semibold"},"Context Utilities",-1))])]),default:r(()=>[e("div",A,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Type-safe context value retrieval with automatic conversion: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[15]||(t[15]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`// Get string values from context
userRole := helper.GetContextString(ctx, "user_role")
authToken := helper.GetContextString(ctx, "auth_token")

// Get numeric values with automatic conversion
userID := helper.GetContextUint(ctx, "user_id")        // Returns uint
priority := helper.GetContextInt(ctx, "priority")      // Returns int
weight := helper.GetContextFloat(ctx, "weight")        // Returns float64

// Get boolean values
isAdmin := helper.GetContextBool(ctx, "is_admin")
isActive := helper.GetContextBool(ctx, "active")

// Context keys are automatically prefixed with "base_"
// So "user_id" becomes "base_user_id" internally`)],-1)])),_:1,__:[15]})])]),_:1}),n(s,null,{header:r(()=>[e("div",j,[e("div",F,[n(o,{name:"i-lucide-database",class:"w-5 h-5"})]),t[17]||(t[17]=e("h3",{class:"font-semibold"},"Dynamic Model Operations",-1))])]),default:r(()=>[e("div",q,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Dynamically retrieve objects based on field names and values: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[18]||(t[18]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`// First, register your models for dynamic retrieval
helper.RegisterModel("categories", func() interface{} { 
    return &models.Category{} 
})
helper.RegisterModel("users", func() interface{} { 
    return &models.User{} 
})

// Dynamically get objects by field relationships
// Automatically extracts table name from field name
category, err := helper.GetObject(db, "category_id", 5)
if err != nil {
    return fmt.Errorf("failed to get category: %w", err)
}

user, err := helper.GetObject(db, "user_id", 123)
if err != nil {
    return fmt.Errorf("failed to get user: %w", err)
}

// Type-safe version with generics
category, err := helper.GetObjectAs[models.Category](db, "category_id", 5)
if err != nil {
    return fmt.Errorf("failed to get category: %w", err)
}

// The function automatically:
// 1. Extracts "category" from "category_id"
// 2. Pluralizes to "categories" 
// 3. Looks up the registered model constructor
// 4. Queries the database for id = 5`)],-1)])),_:1,__:[18]})])]),_:1}),n(s,null,{header:r(()=>[e("div",H,[e("div",L,[n(o,{name:"i-lucide-link",class:"w-5 h-5"})]),t[20]||(t[20]=e("h3",{class:"font-semibold"},"Slug Generation",-1))])]),default:r(()=>[e("div",V,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Generate URL-friendly slugs with uniqueness guarantees: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[21]||(t[21]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`slugHelper := helper.NewSlugHelper()

// Generate slug from title
slug := slugHelper.Normalize("My Blog Post", "", "en")
// Result: "my-blog-post"

// Use custom slug if provided
slug := slugHelper.Normalize("My Blog Post", "custom-slug", "en")
// Result: "custom-slug"

// Generate unique slug with conflict resolution
existsFunc := func(slug string) (bool, error) {
    var count int64
    err := db.Model(&models.Post{}).Where("slug = ?", slug).Count(&count).Error
    return count > 0, err
}

uniqueSlug, err := slugHelper.GenerateUniqueSlug("my-blog-post", existsFunc)
if err != nil {
    return err
}
// Result: "my-blog-post" or "my-blog-post-2" if conflict exists`)],-1)])),_:1,__:[21]})])]),_:1})])]),e("section",O,[t[33]||(t[33]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Base Classes",-1)),t[34]||(t[34]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Base Framework provides base classes that you can embed in your modules to get common functionality automatically. ",-1)),e("div",J,[n(s,null,{header:r(()=>[e("div",z,[e("div",W,[n(o,{name:"i-lucide-package",class:"w-5 h-5"})]),t[24]||(t[24]=e("h3",{class:"font-semibold"},"Base Module",-1))])]),default:r(()=>[e("div",$,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Provides common module functionality with dependency injection: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[25]||(t[25]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`import "base/core/base"

type MyModule struct {
    *base.Module
    // Your module-specific fields
}

func NewMyModule(deps base.ModuleDependencies) *MyModule {
    return &MyModule{
        Module: base.NewModule("my-module", deps),
    }
}

func (m *MyModule) SomeMethod() {
    // Logging with module context
    m.LogInfo("Operation started", logger.String("operation", "example"))
    m.LogError("Operation failed", logger.String("error", "example"))
    
    // Emit events with module context
    m.EmitEvent("my-module.operation.completed", data)
    
    // Auto-migrate models
    err := m.AutoMigrate(&models.MyModel{})
    
    // Register routes with logging
    m.RegisterRoutes(router, func(r *router.RouterGroup) {
        r.GET("/api/my-endpoint", handler)
    })
    
    // Validate configuration
    err := m.ValidateConfig(func(cfg *config.Config) error {
        if cfg.MyRequiredField == "" {
            return errors.New("my_required_field is required")
        }
        return nil
    })
}`)],-1)])),_:1,__:[25]})])]),_:1}),n(s,null,{header:r(()=>[e("div",Q,[e("div",Z,[n(o,{name:"i-lucide-cog",class:"w-5 h-5"})]),t[27]||(t[27]=e("h3",{class:"font-semibold"},"Base Service",-1))])]),default:r(()=>[e("div",Y,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Common service operations like logging, pagination, and database transactions: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[28]||(t[28]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`type MyService struct {
    *base.Service
}

func NewMyService(db *gorm.DB, logger logger.Logger, emitter *emitter.Emitter, storage *storage.ActiveStorage) *MyService {
    return &MyService{
        Service: base.NewService(db, logger, emitter, storage),
    }
}

func (s *MyService) CreatePost(data *CreatePostRequest) (*models.Post, error) {
    // Validate ID
    if err := s.ValidateID(data.UserID); err != nil {
        return nil, err
    }
    
    // Use transaction wrapper
    var post *models.Post
    err := s.WithTransaction(func(tx *gorm.DB) error {
        post = &models.Post{Title: data.Title, Content: data.Content}
        return tx.Create(post).Error
    })
    if err != nil {
        s.LogError("create_post", err, logger.String("title", data.Title))
        return nil, err
    }
    
    // Emit event
    s.EmitEvent("post.created", post)
    s.LogInfo("create_post", "Post created successfully", logger.Uint("post_id", post.ID))
    
    return post, nil
}

func (s *MyService) GetPosts(page, limit int) (*types.PaginatedResponse, error) {
    var posts []models.Post
    var total int64
    
    // Count total
    s.DB.Model(&models.Post{}).Count(&total)
    
    // Get paginated data
    offset := (page - 1) * limit
    s.DB.Offset(offset).Limit(limit).Find(&posts)
    
    // Create paginated response
    return s.CreatePaginatedResponse(posts, total, page, limit), nil
}`)],-1)])),_:1,__:[28]})])]),_:1}),n(s,null,{header:r(()=>[e("div",K,[e("div",X,[n(o,{name:"i-lucide-globe",class:"w-5 h-5"})]),t[30]||(t[30]=e("h3",{class:"font-semibold"},"Base Controller",-1))])]),default:r(()=>[e("div",ee,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Standardized HTTP response methods and parameter extraction: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[31]||(t[31]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`type MyController struct {
    *base.Controller
    service *MyService
}

func NewMyController(logger logger.Logger, storage *storage.ActiveStorage, service *MyService) *MyController {
    return &MyController{
        Controller: base.NewController(logger, storage),
        service:    service,
    }
}

func (c *MyController) CreatePost(ctx *router.Context) error {
    var req CreatePostRequest
    if err := ctx.ShouldBindJSON(&req); err != nil {
        c.RespondValidationError(ctx, err)
        return nil
    }
    
    post, err := c.service.CreatePost(&req)
    if err != nil {
        c.RespondInternalError(ctx, "Failed to create post")
        return nil
    }
    
    // Standardized success response
    c.RespondCreated(ctx, post, "Post created successfully")
    return nil
}

func (c *MyController) GetPost(ctx *router.Context) error {
    // Extract ID parameter with validation
    id, err := c.GetIDParam(ctx)
    if err != nil {
        c.RespondError(ctx, http.StatusBadRequest, "Invalid ID format")
        return nil
    }
    
    post, err := c.service.GetPostByID(id)
    if err != nil {
        c.RespondNotFound(ctx, "Post")
        return nil
    }
    
    c.RespondSuccess(ctx, post)
    return nil
}

func (c *MyController) ListPosts(ctx *router.Context) error {
    // Extract pagination parameters
    page, limit := c.GetPaginationParams(ctx)
    
    posts, err := c.service.GetPosts(page, limit)
    if err != nil {
        c.RespondInternalError(ctx, "Failed to retrieve posts")
        return nil
    }
    
    c.RespondSuccess(ctx, posts)
    return nil
}`)],-1)])),_:1,__:[31]})])]),_:1})])]),e("section",te,[t[41]||(t[41]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Custom Types",-1)),e("div",re,[n(s,null,{header:r(()=>[e("div",ne,[e("div",se,[n(o,{name:"i-lucide-calendar",class:"w-5 h-5"})]),t[35]||(t[35]=e("h3",{class:"font-semibold"},"DateTime Type",-1))])]),default:r(()=>[e("div",oe,[t[37]||(t[37]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Enhanced datetime handling with flexible parsing and database compatibility: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[36]||(t[36]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`import "base/core/types"

type MyModel struct {
    ID        uint            \`json:"id"\`
    Name      string          \`json:"name"\`
    CreatedAt types.DateTime  \`json:"created_at"\`
    UpdatedAt types.DateTime  \`json:"updated_at"\`
}

// Usage examples
now := types.Now()                           // Current time
dt := types.DateTime{Time: time.Now()}       // From time.Time

// JSON parsing supports multiple formats:
// - RFC3339: "2006-01-02T15:04:05Z07:00"
// - MySQL: "2006-01-02 15:04:05"
// - Date only: "2006-01-02"

// Methods available on DateTime
if !dt.IsZero() {
    formatted := dt.Format("2006-01-02")     // Custom formatting
    future := dt.Add(24 * time.Hour)         // Add duration
    duration := dt.Sub(other)                // Duration between times
    
    isAfter := dt.After(other)               // Comparison
    isBefore := dt.Before(other)             // Comparison
    isEqual := dt.Equal(other)               // Equality
}`)],-1)])),_:1,__:[36]})])]),_:1}),n(s,null,{header:r(()=>[e("div",ae,[e("div",le,[n(o,{name:"i-lucide-server",class:"w-5 h-5"})]),t[38]||(t[38]=e("h3",{class:"font-semibold"},"Standardized Response Types",-1))])]),default:r(()=>[e("div",ie,[t[40]||(t[40]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Consistent response structures for success, error, and paginated responses: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[39]||(t[39]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`// Success Response
successResponse := types.SuccessResponse{
    Success: true,
    Message: "Operation completed",
    Data:    myData,
}

// Error Response
errorResponse := types.ErrorResponse{
    Success: false,
    Error:   "Something went wrong",
    Details: errorDetails, // Optional additional info
}

// Paginated Response
paginatedResponse := types.PaginatedResponse{
    Data: posts,
    Pagination: types.Pagination{
        Total:      100,
        Page:       1,
        PageSize:   10,
        TotalPages: 10,
    },
}

// JSON output examples:
{
  "success": true,
  "message": "Posts retrieved successfully",
  "data": [...]
}

{
  "success": false,
  "error": "Validation failed",
  "details": "Title is required"
}

{
  "data": [...],
  "pagination": {
    "total": 100,
    "page": 1,
    "page_size": 10,
    "total_pages": 10
  }
}`)],-1)])),_:1,__:[39]})])]),_:1})])]),e("section",de,[t[51]||(t[51]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Error Handling Types",-1)),e("div",ue,[n(s,null,{header:r(()=>[e("div",ge,[e("div",ce,[n(o,{name:"i-lucide-alert-circle",class:"w-5 h-5"})]),t[42]||(t[42]=e("h3",{class:"font-semibold"},"Validation Error Types",-1))])]),default:r(()=>[e("div",pe,[t[44]||(t[44]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Structured validation error handling with field-specific error messages: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[43]||(t[43]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`import "base/core/types"

// Single validation error
validationErr := types.ValidationError{
    Field:   "email",
    Message: "Email address is required",
}

// Multiple validation errors
validationResponse := types.ValidationErrorResponse{
    Errors: []types.ValidationError{
        {Field: "title", Message: "Title must be at least 3 characters"},
        {Field: "content", Message: "Content cannot be empty"},
        {Field: "category_id", Message: "Valid category is required"},
    },
}

// Usage in controllers
func (c *Controller) ValidatePost(ctx *router.Context) error {
    var errors []types.ValidationError
    
    if req.Title == "" {
        errors = append(errors, types.ValidationError{
            Field: "title", Message: "Title is required",
        })
    }
    
    if len(errors) > 0 {
        return ctx.JSON(400, types.ValidationErrorResponse{Errors: errors})
    }
    
    return nil
}`)],-1)])),_:1,__:[43]})])]),_:1}),n(s,null,{header:r(()=>[e("div",me,[e("div",fe,[n(o,{name:"i-lucide-x-circle",class:"w-5 h-5"})]),t[45]||(t[45]=e("h3",{class:"font-semibold"},"Predefined Common Errors",-1))])]),default:r(()=>[e("div",ye,[t[47]||(t[47]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Ready-to-use error constants for common scenarios: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[46]||(t[46]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`import "base/core/types"

// Authentication and authorization errors
if err := validateToken(token); err != nil {
    return types.ErrInvalidToken
}

if time.Now().After(claims.ExpiresAt.Time) {
    return types.ErrTokenExpired
}

// User management errors
user, err := getUserByEmail(email)
if err != nil {
    return types.ErrUserNotFound
}

if !bcrypt.CompareHashAndPassword(user.Password, []byte(password)) {
    return types.ErrInvalidPassword
}

// Registration validation
if userExists(email) {
    return types.ErrEmailExists
}

if !isValidEmail(email) {
    return types.ErrInvalidEmail
}

// Custom error wrapping
func (s *AuthService) Login(email, password string) error {
    user, err := s.GetUserByEmail(email)
    if err != nil {
        s.Logger.Error("User lookup failed", logger.String("email", email))
        return fmt.Errorf("login failed: %w", types.ErrUserNotFound)
    }
    
    if !s.ValidatePassword(user, password) {
        s.Logger.Warn("Invalid password attempt", logger.String("email", email))
        return fmt.Errorf("login failed: %w", types.ErrInvalidPassword)
    }
    
    return nil
}`)],-1)])),_:1,__:[46]})])]),_:1}),n(s,null,{header:r(()=>[e("div",xe,[e("div",be,[n(o,{name:"i-lucide-user",class:"w-5 h-5"})]),t[48]||(t[48]=e("h3",{class:"font-semibold"},"Standard User Data Type",-1))])]),default:r(()=>[e("div",ve,[t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Standardized user data structure for consistent user representation: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[49]||(t[49]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`import "base/core/types"

// Standard user data structure
userData := types.UserData{
    Id:        user.ID,
    FirstName: user.FirstName,
    LastName:  user.LastName,
    Email:     user.Email,
    Username:  user.Username,
}

// Usage in responses
func (c *AuthController) GetProfile(ctx *router.Context) error {
    userID := c.GetContextUint(ctx, "user_id")
    
    user, err := c.service.GetUser(userID)
    if err != nil {
        return c.RespondNotFound(ctx, "User")
    }
    
    // Convert to standard format
    userData := types.UserData{
        Id:        user.ID,
        FirstName: user.FirstName,
        LastName:  user.LastName,
        Email:     user.Email,
        Username:  user.Username,
    }
    
    return c.RespondSuccess(ctx, userData)
}

// JSON output
{
  "success": true,
  "data": {
    "id": 123,
    "firstname": "John",
    "lastname": "Doe", 
    "email": "john@example.com",
    "username": "johndoe"
  }
}`)],-1)])),_:1,__:[49]})])]),_:1})])]),e("section",he,[t[56]||(t[56]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Best Practices",-1)),e("div",we,[n(s,null,{header:r(()=>t[52]||(t[52]=[e("h3",{class:"font-semibold text-green-600 dark:text-green-400"},"✅ Do",-1)])),default:r(()=>[t[53]||(t[53]=e("ul",{class:"text-sm space-y-2"},[e("li",null,"• Use base classes to inherit common functionality"),e("li",null,"• Register models for dynamic retrieval early in initialization"),e("li",null,"• Use standardized response types for consistency"),e("li",null,"• Leverage transaction helpers for data integrity"),e("li",null,"• Use context helpers for type-safe value extraction"),e("li",null,"• Generate unique slugs to avoid conflicts"),e("li",null,"• Use the DateTime type for flexible time handling"),e("li",null,"• Use predefined error constants for common scenarios"),e("li",null,"• Structure validation errors with field-specific messages")],-1))]),_:1,__:[53]}),n(s,null,{header:r(()=>t[54]||(t[54]=[e("h3",{class:"font-semibold text-red-600 dark:text-red-400"},"❌ Don't",-1)])),default:r(()=>[t[55]||(t[55]=e("ul",{class:"text-sm space-y-2"},[e("li",null,"• Reimplement functionality already provided by helpers"),e("li",null,"• Forget to register models before using dynamic retrieval"),e("li",null,"• Skip error handling in helper functions"),e("li",null,"• Use raw time.Time when DateTime provides better features"),e("li",null,"• Hardcode response structures instead of using types"),e("li",null,"• Ignore transaction boundaries for related operations"),e("li",null,"• Access context values without type checking"),e("li",null,"• Create custom error types for common error scenarios"),e("li",null,"• Return generic errors without field-specific validation messages")],-1))]),_:1,__:[55]})])]),e("section",ke,[t[58]||(t[58]=e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-6"},"Integration Example",-1)),t[59]||(t[59]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-6"}," Here's how to use multiple helpers together in a real module: ",-1)),n(s,{class:"bg-gray-50 dark:bg-gray-800"},{default:r(()=>t[57]||(t[57]=[e("pre",{class:"text-sm overflow-x-auto"},[e("code",{class:"language-go"},`// Module with integrated helpers
type BlogModule struct {
    *base.Module
    service    *BlogService
    controller *BlogController
}

func NewBlogModule(deps base.ModuleDependencies) *BlogModule {
    // Register models for dynamic retrieval
    helper.RegisterModel("categories", func() interface{} { return &models.Category{} })
    helper.RegisterModel("users", func() interface{} { return &models.User{} })
    
    // Create services with base functionality
    service := &BlogService{
        Service: base.NewService(deps.GetDB(), deps.GetLogger(), deps.GetEmitter(), deps.GetStorage()),
        slugHelper: helper.NewSlugHelper(),
    }
    
    // Create controller with base functionality
    controller := &BlogController{
        Controller: base.NewController(deps.GetLogger(), deps.GetStorage()),
        service:    service,
    }
    
    return &BlogModule{
        Module:     base.NewModule("blog", deps),
        service:    service,
        controller: controller,
    }
}

type BlogService struct {
    *base.Service
    slugHelper *helper.SlugHelper
}

func (s *BlogService) CreatePost(data *CreatePostRequest) (*models.Post, error) {
    // Validate relationships using dynamic helpers
    category, err := helper.GetObjectAs[models.Category](s.DB, "category_id", data.CategoryID)
    if err != nil {
        return nil, fmt.Errorf("invalid category: %w", err)
    }
    
    author, err := helper.GetObjectAs[models.User](s.DB, "user_id", data.AuthorID)
    if err != nil {
        return nil, fmt.Errorf("invalid author: %w", err)
    }
    
    // Generate unique slug
    baseSlug := s.slugHelper.Normalize(data.Title, data.Slug, "en")
    uniqueSlug, err := s.slugHelper.GenerateUniqueSlug(baseSlug, func(slug string) (bool, error) {
        var count int64
        err := s.DB.Model(&models.Post{}).Where("slug = ?", slug).Count(&count).Error
        return count > 0, err
    })
    if err != nil {
        return nil, err
    }
    
    // Create post with transaction
    var post *models.Post
    err = s.WithTransaction(func(tx *gorm.DB) error {
        post = &models.Post{
            Title:      data.Title,
            Content:    data.Content,
            Slug:       uniqueSlug,
            CategoryID: category.ID,
            AuthorID:   author.ID,
            CreatedAt:  types.Now(),
        }
        return tx.Create(post).Error
    })
    
    if err != nil {
        s.LogError("create_post", err, 
            logger.String("title", data.Title),
            logger.String("slug", uniqueSlug))
        return nil, err
    }
    
    // Emit event and log success
    s.EmitEvent("blog.post.created", post)
    s.LogInfo("create_post", "Post created successfully", 
        logger.Uint("post_id", post.ID),
        logger.String("slug", uniqueSlug))
    
    return post, nil
}`)],-1)])),_:1,__:[57]})]),e("section",null,[n(l,{icon:"i-heroicons-information-circle",color:"blue",variant:"soft",title:"Next Steps",description:"Explore the specific framework components like Storage, Email, and Authentication to see how they integrate with these helper functions for complete application development."})])])),[[d]])]),_:1})}}};export{Me as default};
